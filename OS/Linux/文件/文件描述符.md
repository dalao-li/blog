<!--
 * @Description: 
 * @Version: 1.0
 * @Author: DaLao
 * @Email: dalao@xxx.com
 * @Date: 2021-03-30 11:54:45
 * @LastEditors: dalao
 * @LastEditTime: 2023-04-05 02:06:21
-->

# 文件访问


## 文件描述符

文件描述符`fd`(file descriptor), 是指向某个文件的符号, 为非负整数, 可通过它访问打开的文件或设备

打开或创建文件时, 内核向进程返回一个文件描述符

读写文件时, 使用open或creat返回的文件描述符标识该文件, 将其作为参数传给read或write

程序开始运行时, 一般会有三个打开的文件描述符

| 文件描述符 | 缩写   | 描述         | 默认指向 |
| ---------- | ------ | ------------ | -------- |
| `fd0`      | stdin  | 标准输入     | 键盘     |
| `fd1`      | stdout | 标准输出     | 屏幕     |
| `fd2`      | stderr | 标准错误输出 | 屏幕     |


Linux命令处理可描述为

```sh
fd[输入文件]->命令->fd[输出文件]
```

如 ls, 默认输入文件是键盘, 输出文件是屏幕


## 重定向


重定向可改变文件描述符`fd`所指向的文件

| 方向       | 符号        |
| ---------- | ----------- |
| 输入重定向 | `<` 和 `<<` |
| 输出重定向 | `>` 和 `>>` |

```sh
echo "666" > a.txt

# fd作为标准输出可以省略, 上命令可写为
echo "666" 1> a.txt
```

echo本是`fd1`(标准输出), 默认指向屏幕, 经重定向后`fd1`指向a.txt, 字符输出到此文件

![](https://cdn.hurra.ltd/img/20220220144913.png)


- 通过输出重定向丢弃信息

```sh
for i in {1..254};do
    ip="192.168.1.${i}"
    # 将标准/错误输出全部重定向到/dev/null中(丢弃产生的所有信息)
    ping -c 2 ${ip} > /dev/null &
done
```