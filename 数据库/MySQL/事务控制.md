<!--
 * @Description: 
 * @Version: 1.0
 * @Author: DaLao
 * @Email: dalao_li@163.com
 * @Date: 2021-10-07 14:06:16
 * @LastEditors: DaLao
 * @LastEditTime: 2021-10-07 14:06:30
-->

## 事务控制

| 操作         | 指令       |
| ------------ | ---------- |
| 开始一个事务 | `BEGIN`    |
| 事务回滚     | `ROLLBACK` |
| 事务确认     | `COMMIT`   |

例，操作 $Sqlite3$ 

```sql
# 建表
CREATE TABLE "info" (
  "id" text NOT NULL，
  "name" text，
  PRIMARY KEY ("id")
);
```
```sql
# 事务开始
BEGIN;

# 插入数据
INSERT INTO info (id，name) VALUES ('000A-X'，'WANG-LI');

# 事务确认
COMMIT;
```

![](https://cdn.hurra.ltd/img/20200712233125.png)


```sql
# 开始
BEGIN;

INSERT INTO info (id，name) VALUES ('000B-Y'，'QING-XU');

COMMIT;

BEGIN;

# 插入数据
INSERT INTO info (id，name) VALUES ('000C-Z'，'SONG-LING');

# 回滚，撤回插入
ROLLBACK;
```

![](https://cdn.hurra.ltd/img/20200712235320.png)

可以看到第二条数据并未写入

```sql
BEGIN;

# 删除操作
DELETE FROM info WHERE id = '000B-Y';

# 回滚，撤销删除
ROLLBACK;
```

![](https://cdn.hurra.ltd/img/20200713000345.png)

可以看到数据没有被删除
