<!--
 * @Description: 
 * @Version: 1.0
 * @Author: DaLao
 * @Email: dalao_li@163.com
 * @Date: 2021-03-12 13:55:49
 * @LastEditors: DaLao
 * @LastEditTime: 2022-01-09 14:42:39
-->

## sed

```sh
sed -参数 '起始范围，结束范围  操作' 文件
```

打印file.txt 1-5行
  
```sh
sed -n '1，5 p' file.txt
```

| 参数         | 含义                                            |
| ------------ | ----------------------------------------------- |
| n            | 忽略执行过程的输出只输出结果                    |
| i  (`危险!`) | 所有改动将覆盖原文件，可用`-i.bak` 对原文件备份 |


| 范围          | 含义                            |
| ------------- | ------------------------------- |
| 5             | 选择第5行，若为空则是选择所有行 |
| 2，5 或 2，+3 | 选择2到5行，共4行               |
| 1~2           | 选择奇数行                      |
| 2~2           | 选择偶数行                      |
| 2，$          | 从第2行到文件结尾               |

| 操作 | 含义                                   |
| ---- | -------------------------------------- |
| p    | 对匹配内容进行打印                     |
| d    | 对匹配内容进行删除，此时要去掉`-n`参数 |
| w    | 将匹配内容写入其他地方                 |
| g    | 全部替换                               |

若字符串中带有路径符号 `/` 则可以用 `#` 做分隔符

## 替换

- 第一行前添加字符串

```sh
sed -i '1i添加的内容' 文件路径
```

- 最后一行`行前`添加字符串

```sh
sed -i '$i添加的内容' 文件路径
```

- 最后一行`行后`添加字符串

```sh
sed -i '$a添加的内容' 文件路径
```

Ubuntu换源

```sh
sed -i 's#security.ubuntu.com#mirrors.aliyun.com#g' /etc/apt/sources.list

sed -i 's#cn.archive.ubuntu.com#mirrors.aliyun.com#g' /etc/apt/sources.list
```