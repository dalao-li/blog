<!--
 * @Description: 
 * @Version: 1.0
 * @Author: DaLao
 * @Email: dalao_li@163.com
 * @Date: 2021-10-06 21:05:54
 * @LastEditors: DaLao
 * @LastEditTime: 2021-11-09 23:43:07
-->

参考 
https://zhuanlan.zhihu.com/p/105086274

进程就是一个数据结构

```c
struct task_struct {
    // 进程状态
    long  state;
    // 虚拟内存结构体
    struct mm_struct  *mm;
    // 进程号
    pid_t  pid;
    // 指向父进程的指针
    struct task_struct __rcu  *parent;
    // 子进程列表
    struct list_head  children;
    // 存放文件系统信息的指针
    struct fs_struct  *fs;
    // 一个数组，包含该进程打开的文件指针
    struct files_struct  *files;
};
```
task_struct就是 Linux 内核对于一个进程的描述，也可以称为「进程描述符」。源码比较复杂，我这里就截取了一小部分比较常见的。

其中比较有意思的是mm指针和files指针。mm指向的是进程的虚拟内存，也就是载入资源和可执行文件的地方

## files

`files`是一个指针数组，存放进程打开的文件的指针

进程创建时，files的前三位被填入默认值，分别指向标准输入流、标准输出流、标准错误流

进程会从`files[0]`读取输入(键盘)，将输出写入`files[1]`(显示屏)，将错误信息写入`files[2]`(显示屏)

若程序需要其他资源，比如打开一个文件进行读写，则这个文件就会被放到files的第4个位置

printf函数是向命令行打印字符，本质上是进程向`files[1]`写入数据
，scanf函数则是进程从`files[0]`中读取数据

