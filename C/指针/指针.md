## 指针

指针是变量，用来存储地址

指针大小只与系统位数有关，与指针类型无关，32位系统指针大小为4字节，64位系统指针大小位8字节

![](https://cdn.hurra.ltd/img/20211113232048.png)


## 初始化
```c
//可以，含义为定义一个char*形指针，并且初始化地址
char *p1 = "12345";   
```
字符串常量类型为$const$ $char$ $*$，可初始化指针

```c
//报错
int *p1 = 1;

// 警告：初始化使指针来自整数而不使用强制转换
// warning: initialization makes pointer from integer without a cast [-Wint-conversion]
```
整型常量的类型为$int$，不可初始化指针


## 常量指针

指向一个常量，指向可变，指向地址中的内容不可变
```c
const char *
```

## 指针常量

指针是常量，指向不可变，指向地址里的内容可变

## 字符指针

字符指针是指向字符型数据的指针变量.

将字符串的首地址赋值给字符指针，可让字符指针指向字符串.

```c
//将保存与常量存储区的字符串首地址赋值给p
char *p = "Hello";

//与上面代码等价，注意此处不能理解为将字符串赋值给p
char *p;
p = "Hello";

//访问
printf("%s\n",p);
```
将字串常量"Hello"赋值给字符指针变量*p过程中，双引号的作用：  

- 在常量区申请空间，存放字符串 

- 在字符串尾加上了`'/0'`    

- 返回字符串首地址

此处即将"Hello"的**首地址**赋给了*p

输出时，系统先输出字符指针p所指向字符串的首字符，然后自动执行p++，使p指向下个字符，然后再次输出，直到结束标志'\0'为止.

## 输出示例
```c
char *p = "abcdef";

// *p = a
printf("*p = %c\n",*p);

// p = abcdef
printf("p = %s\n",p);
```

输出字符指针指向的字符串时，不可使用取值符`*`，否则只会输出字符串首字符值.

## 输入示例
```c
char *p = (char *) malloc (sizeof(char) * 10);

scanf("%s",p);
    
printf("%s\n",p);
```

输入时，字符指针必须指向一段存在的地址，否则就是野指针.

上述程序中，若p未初始化就调用，运行时会报错$Segmentation$ $fault$.

## 修改示例
```c
char *p = (char *) malloc (sizeof(char) * N);

scanf("%s",p);

//可以
*(p + 2) = 'X';
```
此时指针$p$在栈区，分配的$N$个字节在堆区，字符串的值可以修改


```c
char *p = "aaaaa";

//报错
*(p + 2) = 'X';
```
此时指针$p$在栈区，字符串"aaaaa"在常量区，字符串的值不可修改


## 与string的异同

$char$ $*$是指针，由用户管理内存.

$string$ 是$STL$的容器，由系统管理内存.
