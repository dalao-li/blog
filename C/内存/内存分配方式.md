<!--
 * @Description: 
 * @Version: 1.0
 * @Author: DaLao
 * @Email: dalao_li@163.com
 * @Date: 2021-02-11 21:50:35
 * @LastEditors: DaLao
 * @LastEditTime: 2022-01-13 11:17:29
-->

## 静态存储区域分配

由编译器自动分配和释放

在程序编译的时已分配好，在程序整个运行期间都存在，直到整个程序运行结束时才被释放

例如全局变量与static变量

## 栈上分配

由编译器自动分配和释放

在执行函数时函数内局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元将被自动释放

栈内存分配运算内置于处理器的指令集中，其运行效率一般很高，但是分配的内存容量有限

## 堆上分配(动态内存分配)

由程序员手动完成申请和释放

运行时使用内存分配函数来申请任意内存，使用完后再使用内存释放函数来释放内存

动态内存的整个生存期由程序员决定，使用非常灵活

若在堆上分配了内存空间，就必须及时释放，否则将会导致运行的程序出现内存泄漏等错误


```c
#include <stdio.h>
#include <malloc.h>
int main(void){
    // 在栈分配
    int i1=0;
    int i2=0;
    int i3=0;
    printf("栈:向下\n");
    printf("i1=%x\n",&i1);
    printf("i2=%x\n",&i2);
    printf("i3=%x\n\n",&i3);
     
    // 在堆分配
    printf("堆:向上\n");
    char *p1 = (char *)malloc(4);
    char *p2 = (char *)malloc(4);
    char *p3 = (char *)malloc(4);
    printf("p1=%x\n",p1);
    printf("p2=%x\n",p2);
    printf("p3=%x\n",p3);
    
    // 释放堆内存
    free(p1);
    p1=NULL;
    free(p2);
    p2=NULL;
    free(p3);
    p3=NULL;
    return 0;
}
```

![](https://cdn.hurra.ltd/img/20220113111724.png)


内存中栈区主要用于分配局部变量空间，处于相对较高的地址，栈地址`向下`增长

内存中堆区则主要用于分配程序员申请的内存空间，堆地址`向上`增长



